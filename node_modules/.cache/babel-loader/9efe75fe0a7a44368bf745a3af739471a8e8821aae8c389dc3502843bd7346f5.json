{"ast":null,"code":"import _slicedToArray from\"/home/dilip/Desktop/pesto/project/Goalie-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useRef}from\"react\";import{BsFilePost}from\"react-icons/bs\";import PostFormModal from\"../components/feed/postFormModal\";import{GrFormClose}from\"react-icons/gr\";import imageUpload from\"../styles/assets/placeholders/imgUpload.png\";import{ThreeDots}from\"react-loader-spinner\";import{toast}from\"react-toastify\";import{setNewPost}from\"../services/serverCalls\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostCreate(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState({uploadedImage:\"\",description:\"\"}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var uploadedImage=formData.uploadedImage,description=formData.description;// const [img, setImg] = useState<File>();\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isButtonLoading=_useState6[0],setIsButtonLoading=_useState6[1];var textRef=useRef();var imgRef=useRef();var onChangeHandler=function onChangeHandler(e){var target=e.target;textRef.current.style.height=\"30px\";textRef.current.style.height=\"\".concat(target.scrollHeight,\"px\");};var onSubmit=function onSubmit(e){e.preventDefault();setIsButtonLoading(true);if(uploadedImage===\"\"||description===\"\"){toast.error(\"Please enter atleast one field to upload\");setIsButtonLoading(false);}else{var postData={desc:formData.description,img:formData.uploadedImage};console.log(postData);setNewPost(postData);setIsOpen(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:isOpen?\"absolute z-50 flex justify-center items-center backdrop-blur-md bg-gray-400/40 h-full w-full rounded-2xl\":\"absolute flex justify-center items-center h-full w-full rounded-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-0 md:bottom-12 right-12 z-10\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsOpen(true);},className:isOpen?\"hidden\":\"absolute bottom-8 md:bottom-0 right-0 flex items-center justify-center bg-orange-500 text-4xl text-white h-16 w-16 rounded-full cursor-pointer shadow-xl hover:scale-105 hover:duration-300\",children:/*#__PURE__*/_jsx(BsFilePost,{})})}),/*#__PURE__*/_jsx(PostFormModal,{open:isOpen,onClose:function onClose(){return setIsOpen(false);},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start h-12 items-center border-b-2\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl mx-auto h-fit text-center font-lato text-gray-700 font-semibold absolute left-6\",children:\"Create Post\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setIsOpen(false);},className:\"text-3xl absolute right-0 flex justify-center items-center mr-2 hover:bg-orange-500/30 w-10 h-10 rounded-full\",children:/*#__PURE__*/_jsx(GrFormClose,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-10/12 mx-auto flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xl font-lato font-semibold my-4\",children:\"Upload your photo\"}),/*#__PURE__*/_jsx(\"img\",{src:imageUpload,alt:\"upload photos here\",className:\"w-40 max-w-xl object-cover object-center mx-auto mb-5\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(event){event.preventDefault();imgRef.current.click();},className:\"w-fit h-10 text-lg px-3 mx-auto rounded-full bg-gray-400\",children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"hidden\",ref:imgRef,value:uploadedImage,accept:\"image/*\"// onChange={(event) => {\n//   const file = event.target.files[0];\n//   if (file) {\n//     setImg(file);\n//   } else {\n//     setImg(null);\n//   }\n// }}\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-10/12 mx-auto flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xl font-lato font-semibold my-4\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{maxLength:280,name:\"description\",ref:textRef,value:description,onChange:onChangeHandler,className:\"rounded-3xl scrollbar-hide focus:ring-2 resize-none focus:border-white  focus:ring-orange-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"my-2 py-5 text-center\",children:isButtonLoading?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"rounded-full mx-auto h-10 px-4 w-24 bg-orange-500 text-white text-2xl hover:border-orange-500 hover:border-2\",children:/*#__PURE__*/_jsx(ThreeDots,{height:\"15\",width:\"70\",radius:\"3\",color:\"#ffffff\",ariaLabel:\"three-dots-loading\",visible:true})}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"rounded-full mx-auto h-10 px-4 w-24 bg-orange-500 text-white text-2xl hover:bg-white hover:text-orange-500 hover:border-orange-500 hover:border-2\",children:\"Post\"})})]})})]});}export default PostCreate;","map":{"version":3,"names":["React","useState","useRef","BsFilePost","PostFormModal","GrFormClose","imageUpload","ThreeDots","toast","setNewPost","PostCreate","isOpen","setIsOpen","uploadedImage","description","formData","setFormData","isButtonLoading","setIsButtonLoading","textRef","imgRef","onChangeHandler","e","target","current","style","height","scrollHeight","onSubmit","preventDefault","error","postData","desc","img","console","log","event","click"],"sources":["/home/dilip/Desktop/pesto/project/Goalie-frontend/src/common/postCreateButton2.tsx"],"sourcesContent":["import React, { MutableRefObject } from \"react\";\nimport { useState, useRef } from \"react\";\nimport { BsFilePost } from \"react-icons/bs\";\nimport PostFormModal from \"../components/feed/postFormModal\";\nimport { GrFormClose } from \"react-icons/gr\";\nimport imageUpload from \"../styles/assets/placeholders/imgUpload.png\";\nimport { ThreeDots } from \"react-loader-spinner\";\nimport { toast } from \"react-toastify\";\nimport { setNewPost } from \"../services/serverCalls\";\n\nfunction PostCreate() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const [formData, setFormData] = useState({\n    uploadedImage: \"\",\n    description: \"\",\n  });\n\n  const { uploadedImage, description } = formData;\n\n  // const [img, setImg] = useState<File>();\n\n  const [isButtonLoading, setIsButtonLoading] = useState(false);\n\n  const textRef = useRef<any>();\n\n  const imgRef = useRef() as MutableRefObject<HTMLInputElement>;\n\n  const onChangeHandler = function (e: React.SyntheticEvent<EventTarget>) {\n    const target = e.target as HTMLTextAreaElement;\n    textRef.current.style.height = \"30px\";\n    textRef.current.style.height = `${target.scrollHeight}px`;\n  };\n\n  const onSubmit = (e: React.SyntheticEvent) => {\n    e.preventDefault();\n\n    setIsButtonLoading(true);\n\n    if (uploadedImage === \"\" || description === \"\") {\n      toast.error(\"Please enter atleast one field to upload\");\n      setIsButtonLoading(false);\n    } else {\n      const postData = {\n        desc: formData.description,\n        img: formData.uploadedImage,\n      };\n      console.log(postData);\n      setNewPost(postData);\n      setIsOpen(false);\n    }\n  };\n\n  return (\n    <div\n      className={\n        isOpen\n          ? \"absolute z-50 flex justify-center items-center backdrop-blur-md bg-gray-400/40 h-full w-full rounded-2xl\"\n          : \"absolute flex justify-center items-center h-full w-full rounded-2xl\"\n      }\n    >\n      <div className=\"fixed bottom-0 md:bottom-12 right-12 z-10\">\n        <button\n          onClick={() => setIsOpen(true)}\n          className={\n            isOpen\n              ? \"hidden\"\n              : \"absolute bottom-8 md:bottom-0 right-0 flex items-center justify-center bg-orange-500 text-4xl text-white h-16 w-16 rounded-full cursor-pointer shadow-xl hover:scale-105 hover:duration-300\"\n          }\n        >\n          <BsFilePost />\n        </button>\n      </div>\n      <PostFormModal open={isOpen} onClose={() => setIsOpen(false)}>\n        <form onSubmit={onSubmit}>\n          <div className=\"flex justify-start h-12 items-center border-b-2\">\n            <h1\n              className=\"text-2xl mx-auto h-fit text-center font-lato text-gray-700 font-semibold\n                 absolute left-6\"\n            >\n              Create Post\n            </h1>\n            <button\n              onClick={() => setIsOpen(false)}\n              className=\"text-3xl absolute right-0 flex justify-center items-center mr-2 hover:bg-orange-500/30 w-10 h-10 rounded-full\"\n            >\n              <GrFormClose />\n            </button>\n          </div>\n          <div className=\"w-10/12 mx-auto flex flex-col\">\n            <label className=\"text-xl font-lato font-semibold my-4\">\n              Upload your photo\n            </label>\n            <img\n              src={imageUpload}\n              alt=\"upload photos here\"\n              className=\"w-40 max-w-xl object-cover object-center mx-auto mb-5\"\n            />\n            <button\n              onClick={(event) => {\n                event.preventDefault();\n                imgRef.current.click();\n              }}\n              className=\"w-fit h-10 text-lg px-3 mx-auto rounded-full bg-gray-400\"\n            >\n              Upload Image\n            </button>\n            <input\n              type=\"file\"\n              className=\"hidden\"\n              ref={imgRef}\n              value={uploadedImage}\n              accept=\"image/*\"\n              // onChange={(event) => {\n              //   const file = event.target.files[0];\n              //   if (file) {\n              //     setImg(file);\n              //   } else {\n              //     setImg(null);\n              //   }\n              // }}\n            />\n          </div>\n          <div className=\"w-10/12 mx-auto flex flex-col\">\n            <label className=\"text-xl font-lato font-semibold my-4\">\n              Description\n            </label>\n            <textarea\n              maxLength={280}\n              name=\"description\"\n              ref={textRef}\n              value={description}\n              onChange={onChangeHandler}\n              className=\"rounded-3xl scrollbar-hide focus:ring-2 resize-none focus:border-white  focus:ring-orange-500\"\n            />\n          </div>\n          <div className=\"my-2 py-5 text-center\">\n            {isButtonLoading ? (\n              <button\n                type=\"submit\"\n                className=\"rounded-full mx-auto h-10 px-4 w-24 bg-orange-500 text-white text-2xl\n                        hover:border-orange-500 hover:border-2\"\n              >\n                <ThreeDots\n                  height=\"15\"\n                  width=\"70\"\n                  radius=\"3\"\n                  color=\"#ffffff\"\n                  ariaLabel=\"three-dots-loading\"\n                  visible={true}\n                />\n              </button>\n            ) : (\n              <button\n                type=\"submit\"\n                className=\"rounded-full mx-auto h-10 px-4 w-24 bg-orange-500 text-white text-2xl hover:bg-white hover:text-orange-500\n                        hover:border-orange-500 hover:border-2\"\n              >\n                Post\n              </button>\n            )}\n          </div>\n        </form>\n      </PostFormModal>\n    </div>\n  );\n}\n\nexport default PostCreate;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}