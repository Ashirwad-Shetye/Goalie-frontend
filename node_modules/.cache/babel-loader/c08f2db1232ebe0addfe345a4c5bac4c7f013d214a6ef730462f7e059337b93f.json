{"ast":null,"code":"import _regeneratorRuntime from\"/home/dilip/Desktop/pesto/project/Goalie-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/dilip/Desktop/pesto/project/Goalie-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import authService from'./authService';// Get user from local storage\nvar user=JSON.parse(localStorage.getItem('user'));var initialState={user:user?user:null,isError:false,isSuccess:false,isLoading:false,message:''};// Register user\nexport var register=createAsyncThunk('auth/register',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,thunkAPI){var message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authService.register(user);case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());export var authSlice=createSlice({name:'auth',initialState:initialState,reducers:{reset:function reset(state){state.isLoading=false;state.isError=false;state.isSuccess=false;state.message='';}},extraReducers:function extraReducers(builder){builder.addCase(register.pending,function(state){state.isLoading=true;}).addCase(register.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(register.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;});}});var reset=authSlice.actions.reset;export{reset};export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","user","JSON","parse","localStorage","getItem","initialState","isError","isSuccess","isLoading","message","register","thunkAPI","response","data","toString","rejectWithValue","authSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["/home/dilip/Desktop/pesto/project/Goalie-frontend/src/features/auth/authSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit'\nimport authService from './authService'\n\n// Get user from local storage\n\nconst user = JSON.parse(localStorage.getItem('user')!)\n\nconst initialState = {\n    user: user ? user : null,\n    isError: false,\n    isSuccess: false,\n    isLoading: false,\n    message: '',\n}\n\n// Register user\n\nexport const register = createAsyncThunk('auth/register', async(user, thunkAPI) => {\n    try{\n        return await authService.register(user);\n    } catch(error: any) {\n        const message = \n            (   error.response && \n                error.response.data && \n                error.response.data.message) || \n                error.message || \n                error.toString()\n        return thunkAPI.rejectWithValue(message)\n    }\n})\n\nexport const authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        reset: (state) => {\n            state.isLoading = false;\n            state.isError = false;\n            state.isSuccess = false;\n            state.message = '';\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n        .addCase(register.pending, (state) => {\n            state.isLoading = true;\n        })\n        .addCase(register.fulfilled, (state, action) => {\n            state.isLoading = false;\n            state.isSuccess = true;\n            state.user = action.payload;\n        })\n        .addCase(register.rejected, (state, action: PayloadAction<any>) => {\n            state.isLoading = false;\n            state.isError = true;\n            state.message = action.payload;\n            state.user = null;\n        })\n    },\n})\n\nexport const {reset} = authSlice.actions\n\nexport default authSlice.reducer"],"mappings":"8RAAA,OAASA,WAAW,CAAEC,gBAAgB,KAAuB,kBAAkB,CAC/E,MAAOC,YAAW,KAAM,eAAe,CAEvC;AAEA,GAAMC,KAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAE,CAEtD,GAAMC,aAAY,CAAG,CACjBL,IAAI,CAAEA,IAAI,CAAGA,IAAI,CAAG,IAAI,CACxBM,OAAO,CAAE,KAAK,CACdC,SAAS,CAAE,KAAK,CAChBC,SAAS,CAAE,KAAK,CAChBC,OAAO,CAAE,EACb,CAAC,CAED;AAEA,MAAO,IAAMC,SAAQ,CAAGZ,gBAAgB,CAAC,eAAe,4FAAE,iBAAME,IAAI,CAAEW,QAAQ,sKAEzDZ,YAAW,CAACW,QAAQ,CAACV,IAAI,CAAC,+GAEjCS,OAAO,CACL,YAAMG,QAAQ,EACd,YAAMA,QAAQ,CAACC,IAAI,EACnB,YAAMD,QAAQ,CAACC,IAAI,CAACJ,OAAO,EAC3B,YAAMA,OAAO,EACb,YAAMK,QAAQ,EAAE,iCACjBH,QAAQ,CAACI,eAAe,CAACN,OAAO,CAAC,sEAE/C,mEAAC,CAEF,MAAO,IAAMO,UAAS,CAAGnB,WAAW,CAAC,CACjCoB,IAAI,CAAE,MAAM,CACZZ,YAAY,CAAZA,YAAY,CACZa,QAAQ,CAAE,CACNC,KAAK,CAAE,eAACC,KAAK,CAAK,CACdA,KAAK,CAACZ,SAAS,CAAG,KAAK,CACvBY,KAAK,CAACd,OAAO,CAAG,KAAK,CACrBc,KAAK,CAACb,SAAS,CAAG,KAAK,CACvBa,KAAK,CAACX,OAAO,CAAG,EAAE,CACtB,CACJ,CAAC,CACDY,aAAa,CAAE,uBAACC,OAAO,CAAK,CACxBA,OAAO,CACNC,OAAO,CAACb,QAAQ,CAACc,OAAO,CAAE,SAACJ,KAAK,CAAK,CAClCA,KAAK,CAACZ,SAAS,CAAG,IAAI,CAC1B,CAAC,CAAC,CACDe,OAAO,CAACb,QAAQ,CAACe,SAAS,CAAE,SAACL,KAAK,CAAEM,MAAM,CAAK,CAC5CN,KAAK,CAACZ,SAAS,CAAG,KAAK,CACvBY,KAAK,CAACb,SAAS,CAAG,IAAI,CACtBa,KAAK,CAACpB,IAAI,CAAG0B,MAAM,CAACC,OAAO,CAC/B,CAAC,CAAC,CACDJ,OAAO,CAACb,QAAQ,CAACkB,QAAQ,CAAE,SAACR,KAAK,CAAEM,MAA0B,CAAK,CAC/DN,KAAK,CAACZ,SAAS,CAAG,KAAK,CACvBY,KAAK,CAACd,OAAO,CAAG,IAAI,CACpBc,KAAK,CAACX,OAAO,CAAGiB,MAAM,CAACC,OAAO,CAC9BP,KAAK,CAACpB,IAAI,CAAG,IAAI,CACrB,CAAC,CAAC,CACN,CACJ,CAAC,CAAC,CAEK,GAAOmB,MAAK,CAAIH,SAAS,CAACa,OAAO,CAA1BV,KAAK,CAAqB,cAExC,cAAeH,UAAS,CAACc,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}